<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cauditor</title>
  <meta name="description" content="phone picker">
  <meta name="keywords" content="">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="d-flex align-items-center">
    <!-- Header content can go here -->
  </header>
  <!-- End Header -->

  <main id="main">

    <!-- ======= Phone Spec Comparison Section ======= -->
    <div class="container">
      <section id="portfolio" class="portfolio">
        <div class="container">
          <div class="section-title">
            <h2 class="text-center mb-4">Cauditor</h2>
            <span style="color: #a6a6a6;">Caud</span><span style="color: #0097b2;">It</span><span>Or</span>
            <section id="filtrationFormSection">
              <div class="container" id="headDiv">
                <p>Cauditor makes maintaining top-notch code quality a breeze! Cauditor ensures your code is optimized, secure, and efficient before it hits production. ðŸš€ </p>
                <p> Say goodbye to last-minute fixes, reduce vulnerabilities, and protect your revenue with confidence. ðŸ’¼âœ¨ Boost your development workflow and secure your software with Cauditor</p>

                <!-- File Upload Section -->
                <div class="file-upload mt-3">
                  <form action="#" method="post" enctype="multipart/form-data">
                    
                    <!-- Choice Buttons -->
                    <div class="d-flex justify-content-center mb-3">
                      <button type="button" id="uploadOption" class="btn btn-outline-primary me-2">Upload File</button>
                      <button type="button" id="pasteOption" class="btn btn-outline-secondary">Paste Text</button>
                    </div>
                    
                    <!-- File Upload Input and Cancel Button (hidden initially) -->
                    <div id="fileUploadSection" class="d-flex align-items-center" style="display: none;">
                      <input type="file" id="fileInput" name="file" class="form-control me-2">
                      <button type="button" id="cancelButton" class="btn btn-danger btn-sm">&times;</button>
                    </div>
                    
                    <!-- Text Area for Paste Option (hidden initially) -->
                    <div id="pasteTextBox" style="display: none;">
                      <textarea class="form-control mt-3" rows="5" placeholder="Paste your content here..."></textarea>
                    </div>
                    
                    <!-- Centered Process File Button (hidden initially) -->
                    <div class="d-flex justify-content-center">
                      <button type="button" id="processButton" class="btn btn-primary mt-3" style="display: none;">
                        Process File
                      </button>
                    </div>
                    
                  </form>
                </div>
                
                <script>
                  // Get references to the elements
                  const uploadOption = document.getElementById('uploadOption');
                  const pasteOption = document.getElementById('pasteOption');
                  const fileInput = document.getElementById('fileInput');
                  const cancelButton = document.getElementById('cancelButton');
                  const processButton = document.getElementById('processButton');
                  const fileUploadSection = document.getElementById('fileUploadSection');
                  const pasteTextBox = document.getElementById('pasteTextBox');
              
                  // Show file upload fields when "Upload File" is clicked and hide text box
                  uploadOption.addEventListener('click', function () {
                    fileUploadSection.style.display = 'flex';      // Show file input and cancel button
                    pasteTextBox.style.display = 'none';           // Hide text box
                    processButton.style.display = 'block';         // Show process button
                    fileInput.value = '';                          // Clear any previous file input
                  });
                
                  // Show paste text box when "Paste Text" is clicked and hide file upload
                  pasteOption.addEventListener('click', function () {
                    fileUploadSection.style.display = 'none';      // Hide file input and cancel button
                    pasteTextBox.style.display = 'block';          // Show text box
                    processButton.style.display = 'block';         // Show process button
                  });
                
                  // Clear file input and hide file upload fields when "Cancel" is clicked
                  cancelButton.addEventListener('click', function () {
                    fileInput.value = '';                          // Clear the file input
                    fileUploadSection.style.display = 'none';      // Hide file input and cancel button
                    processButton.style.display = 'none';          // Hide process button
                    pasteTextBox.style.display = 'none';           // Hide text box if previously shown
                  });
                
                  // Hide process button if no file is selected in file input
                  fileInput.addEventListener('change', function () {
                    if (fileInput.files.length === 0) {
                      processButton.style.display = 'none';
                    }
                  });

                  // Add event listener for the process button
                  document.getElementById("processButton").addEventListener("click", function () {
                      const formData = new FormData();
                      const fileInput = document.getElementById("fileInput");

                      // If the file input has a file selected, add it to the form data
                      if (fileInput.files.length > 0) {
                          formData.append("file", fileInput.files[0]);
                      }

                      // Send the form data to the backend using fetch
                      fetch("http://localhost:5000/analyze", {
                          method: "POST",
                          body: formData
                      })
                      .then(response => response.json())
                      .then(data => {
                          console.log(data); // Handle the response
                          alert("File processed successfully!");
                      })
                      .catch(error => {
                          console.error("Error:", error);
                          alert("An error occurred while processing the file.");
                      });
                  });
                </script>
                
    <!-- ======= Back to Top Button ======= -->
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center">
      <i class="bi bi-arrow-up-short"></i>
    </a>

  </main>

</body>

</html>
